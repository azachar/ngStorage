/*! ngstorage 0.3.11-mock | Copyright (c) 2016 Gias Kay Lee | MIT License */!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof exports?(b(require("angular")),module.exports="ngStorage"):b(a.angular)}(this,function(a){"use strict";function b(a,b){var c;try{c=a[b]}catch(d){c=!1}if(c){var e="__"+Math.round(1e7*Math.random());try{a[b].setItem(e,e),a[b].removeItem(e,e)}catch(d){c=!1}}return c}function c(c){var d=b(window,c);return function(){var e="ngStorage-";this.setKeyPrefix=function(a){if("string"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setKeyPrefix() expects a String.");e=a};var f=a.toJson,g=a.fromJson;this.setSerializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setSerializer expects a function.");f=a},this.setDeserializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setDeserializer expects a function.");g=a},this.supported=function(){return!!d},this.get=function(a){return d&&g(d.getItem(e+a))},this.set=function(a,b){return d&&d.setItem(e+a,f(b))},this.remove=function(a){d&&d.removeItem(e+a)},this.$get=["$rootScope","$window","$log","$document",function(d,h,i,j){var k,l,m=e.length,n=b(h,c),o=n||(i.warn("This browser does not support Web Storage!"),{setItem:a.noop,getItem:a.noop,removeItem:a.noop}),p={$default:function(b){for(var c in b)a.isDefined(p[c])||(p[c]=a.copy(b[c]));return p.$sync(),p},$reset:function(a){for(var b in p)"$"===b[0]||delete p[b]&&o.removeItem(e+b);return p.$default(a)},$sync:function(){for(var a,b=0,c=o.length;b<c;b++)(a=o.key(b))&&e===a.slice(0,m)&&(p[a.slice(m)]=g(o.getItem(a)))},$apply:function(){var b;if(l=null,!a.equals(p,k)){b=a.copy(k),a.forEach(p,function(c,d){a.isDefined(c)&&"$"!==d[0]&&(o.setItem(e+d,f(c)),delete b[d])});for(var c in b)o.removeItem(e+c);k=a.copy(p)}},$supported:function(){return!!n}};return p.$sync(),k=a.copy(p),d.$watch(function(){l||(setTimeout(p.$apply,100),l=!0)}),h.addEventListener&&h.addEventListener("storage",function(b){if(b.key){var c=j[0];c.hasFocus&&c.hasFocus()||e!==b.key.slice(0,m)||(b.newValue?p[b.key.slice(m)]=g(b.newValue):delete p[b.key.slice(m)],k=a.copy(p),d.$apply())}}),h.addEventListener&&h.addEventListener("beforeunload",function(){p.$apply()}),p}]}}return a=a&&a.module?a:window.angular,a.module("ngStorage",[]).provider("$localStorage",c("localStorage")).provider("$sessionStorage",c("sessionStorage"))});